(function(e,h){typeof exports=="object"&&typeof module<"u"?module.exports=h():typeof define=="function"&&define.amd?define(h):(e=typeof globalThis<"u"?globalThis:e||self,e.Slidemanager=h())})(this,function(){"use strict";var I=(e,h,o)=>{if(!h.has(e))throw TypeError("Cannot "+o)};var i=(e,h,o)=>(I(e,h,"read from private field"),o?o.call(e):h.get(e)),r=(e,h,o)=>{if(h.has(e))throw TypeError("Cannot add the same private member more than once");h instanceof WeakSet?h.add(e):h.set(e,o)},g=(e,h,o,x)=>(I(e,h,"write to private field"),x?x.call(e,o):h.set(e,o),o);var n=(e,h,o)=>(I(e,h,"access private method"),o);var d,c,u,s,k,N,E,C,M,D,T,O,X,R,Y,j,S,z,y,B,p,w,L,H,A,J,v,q,b,G,f,m;const e=[];let h=-1,o=!1,x=null;const K=(F,t)=>{if(h++,e.push({id:h,fn:F,interval:t,lastTime:performance.now()}),!o){const l=()=>{x=requestAnimationFrame(l),e.forEach(a=>{(a.interval<17||performance.now()-a.lastTime>=a.interval)&&(a.fn(),a.lastTime=performance.now())})};o=!0,l()}return h},P=F=>{for(let t=0;t<e.length;t++)if(F===e[t].id){e.splice(t,1);break}e.length===0&&(cancelAnimationFrame(x),o=!1)};class Q{constructor(t={}){r(this,k);r(this,E);r(this,M);r(this,T);r(this,X);r(this,Y);r(this,S);r(this,y);r(this,p);r(this,L);r(this,A);r(this,v);r(this,b);r(this,f);r(this,d,void 0);r(this,c,void 0);r(this,u,void 0);r(this,s,void 0);if(!t.callback){console.warn("Slidemanager: Missing `callback` property in constructor.");return}if(this.max===-1){console.warn("Slidemanager: Missing `el` or `length` property in constructor.");return}n(this,k,N).call(this);const l={el:null,loop:!1,random:!1,vertical:!1,callback:this.done,auto:!1,interval:5,init:!0,swipe:!0,mouseSwipe:!1,startAt:0,threshold:60};this.options=Object.assign(l,t),this.el=t.el,this.changing=!1,this.max=t.length>0?t.length:t.el&&t.el.children?t.el.children.length:-1,this.index=!isNaN(t.startAt)&&t.startAt!==l.startAt?Math.max(0,Math.min(t.startAt,this.max)):0,g(this,u,null),g(this,s,{startX:0,startY:0,endX:0,endY:0}),this.diagonalMax=125,this.options.init&&this.init()}init(){return this.max===0?null:(this.options.auto&&this.start(),this.options.swipe&&n(this,E,C).call(this),this)}prev(){this.goTo(this.index-1)}next(){this.goTo(this.index+1)}goTo(t,l){if(t===this.index||n(this,p,w).call(this))return;const a=n(this,v,q).call(this,t);if(a===this.index){this.changing=!1;return}const U=n(this,b,G).call(this,a,l);this.options.auto&&this.stop(),this.index=a,this.options.callback(U)}start(){!this.options.auto||n(this,p,w).call(this)||(i(this,u)&&this.stop(),g(this,u,K(n(this,y,B).bind(this),this.options.interval*1e3)))}stop(){!this.options.auto||n(this,p,w).call(this)||(P(i(this,u)),g(this,u,null))}done(){this.changing=!1,this.options.auto&&this.start()}destroy(){return this.max===0?null:(this.changing=!1,this.options.swipe&&this.el&&(this.options.mouseSwipe&&(this.el.removeEventListener("mousedown",i(this,d)),this.el.removeEventListener("mouseup",i(this,c))),this.el.removeEventListener("touchstart",i(this,d)),this.el.removeEventListener("touchend",i(this,c))),this.options.auto&&this.stop(),this)}}return d=new WeakMap,c=new WeakMap,u=new WeakMap,s=new WeakMap,k=new WeakSet,N=function(){this.start=this.start.bind(this),this.stop=this.stop.bind(this),g(this,d,n(this,M,D).bind(this)),g(this,c,n(this,T,O).bind(this)),this.done=this.done.bind(this)},E=new WeakSet,C=function(){this.el&&(this.options.mouseSwipe&&(this.el.addEventListener("mousedown",i(this,d)),this.el.addEventListener("mouseup",i(this,c))),this.el.addEventListener("touchstart",i(this,d)),this.el.addEventListener("touchend",i(this,c)))},M=new WeakSet,D=function(t){i(this,s).startX=t.type==="touchstart"?t.touches[0].screenX:t.screenX,i(this,s).startY=t.type==="touchstart"?t.touches[0].screenY:t.screenY},T=new WeakSet,O=function(t){i(this,s).endX=t.type==="touchend"?t.changedTouches[0].screenX:t.screenX,i(this,s).endY=t.type==="touchend"?t.changedTouches[0].screenY:t.screenY,n(this,S,z).call(this)},X=new WeakSet,R=function(){return i(this,s).endX<i(this,s).startX&&i(this,s).startX-i(this,s).endX<=this.diagonalMax||i(this,s).endX>i(this,s).startX&&i(this,s).endX-i(this,s).startX<=this.diagonalMax},Y=new WeakSet,j=function(){return i(this,s).endY<i(this,s).startY&&i(this,s).startY-i(this,s).endY<=this.diagonalMax||i(this,s).endY>i(this,s).startY&&i(this,s).endY-i(this,s).startY<=this.diagonalMax},S=new WeakSet,z=function(){this.changing||(this.options.vertical?(i(this,s).endY<i(this,s).startY&&i(this,s).startY-i(this,s).endY>=this.options.threshold&&n(this,X,R).call(this)&&n(this,f,m).call(this,-1),i(this,s).endY>i(this,s).startY&&i(this,s).endY-i(this,s).startY>=this.options.threshold&&n(this,X,R).call(this)&&n(this,f,m).call(this,1)):(i(this,s).endX<i(this,s).startX&&i(this,s).startX-i(this,s).endX>=this.options.threshold&&n(this,Y,j).call(this)&&n(this,f,m).call(this,-1),i(this,s).endX>i(this,s).startX&&i(this,s).endX-i(this,s).startX>=this.options.threshold&&n(this,Y,j).call(this)&&n(this,f,m).call(this,1)))},y=new WeakSet,B=function(){this.changing||n(this,f,m).call(this,-1)},p=new WeakSet,w=function(){return this.changing?!0:(this.changing=!0,!1)},L=new WeakSet,H=function(t){return n(this,v,q).call(this,t>0?this.index-1:this.index+1)},A=new WeakSet,J=function(){let t;do t=Math.floor(Math.random()*this.max);while(t===this.index);return t},v=new WeakSet,q=function(t){return t<0?this.options.loop?this.max-1:0:t>this.max-1?this.options.loop?0:this.max-1:t},b=new WeakSet,G=function(t,l){let a=t>this.index?1:-1;return this.index===0&&t===this.max-1?a=-1:this.index===this.max-1&&t===0&&(a=1),{current:t,previous:this.index,direction:a,data:l,done:this.done}},f=new WeakSet,m=function(t){if(n(this,p,w).call(this))return;const l=this.options.random?n(this,A,J).call(this):n(this,L,H).call(this,t);if(l===this.index){this.changing=!1;return}const a=n(this,b,G).call(this,l);this.options.auto&&this.stop(),this.index=l,this.options.callback(a)},Q});
